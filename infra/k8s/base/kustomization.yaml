apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: flowmaestro

resources:
  - namespace.yaml
  - configmap.yaml
  - gcs-configmap.yaml
  - temporal-configmap.yaml
  # External Secrets - Infrastructure (DB, Redis, Temporal)
  # These are managed here because they have different lifecycles
  - external-secrets/secret-store.yaml
  - external-secrets/db-credentials.yaml
  - external-secrets/redis-credentials.yaml
  - external-secrets/temporal-db-credentials.yaml
  # NOTE: Application secrets (core, llm, oauth, service) are managed by Pulumi
  # See: infra/pulumi/src/resources/app-secrets.ts
  # Deployments
  - api-deployment.yaml
  - worker-deployment.yaml
  - frontend-deployment.yaml
  - marketing-deployment.yaml
  - documentation-deployment.yaml
  - static-deployment.yaml
  - status-deployment.yaml
  - temporal-deployment.yaml
  # Services and Networking
  - services.yaml
  - ingress.yaml

commonLabels:
  app: flowmaestro
  managed-by: kustomize
